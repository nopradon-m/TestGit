Screens:
  Submit Screen:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |+
        =//Set(gblCurrentLoad, _stuckLoad);



        ClearCollect(FinalCollection, 
                AddColumns(LoadExportCollection,cr519_upc,LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],cr519_upc),
                                                cr519_brandid,LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],cr519_brandid),
                                                company,LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],cr519_company),
                                                cr519_productname,LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],cr519_productname),
                                                cr519_sntrack,LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],cr519_sntrack),
                                                'Line RECID',LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],LineRECID),
                                                'Line Number',LookUp(ItemMasterCollection,cr519_itemid = LoadExportCollection[@ItemID],LineNumber)
           )
        );


        /*

        ClearCollect(FinalCollection, 
           AddColumns(ItemMasterCollection, "Line Number", LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],LineNumber),
                                            "Load Export No",LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],LoadExportNo),
                                            "Sales Order No", LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],SalesOrderNo),
                                            "Quantity",LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],Quantity),
                                            "Scanned", LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],Scanned),
                                            "Line RECID",LookUp(LoadExportCollection, ItemID = ItemMasterCollection[@cr519_itemid],LineRECID)
           )
        );
        */


        //Clear(confirmed);
        Set(copyUPC,"");
        Set(copyitemID,"");
        //SetFocus(upcInput);


        Set(varSumSnTrack, Coalesce(Sum(Filter(FinalCollection, cr519_sntrack = 1), Quantity), 0));

        Set(varCancelBT,false);





    Children:
      - UpdateSNLog_1:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=/*\r\nIf(!(upcInput.Text in FinalCollection.cr519_upc) || upcInput.Text in confirmed.UPC,false,        // for sntrack = 0 only \r\n    If((upcInput.Text in FinalCollection.cr519_upc && LookUp(FinalCollection,cr519_upc=upcInput.Text,cr519_sntrack) = 0), \r\n    //&& !(upcInput in confirmed.UPC),\r\n\r\n\r\n    Patch(confirmed,Defaults(confirmed),{\r\n            UPC:upcInput.Text,\r\n            SerialNo: \"-\",\r\n            LoadExportNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,LoadExportNo),\r\n            SalesOrderNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,SalesOrderNo),\r\n            LineNumber: LookUp(FinalCollection,cr519_upc=upcInput.Text,LineNumber),\r\n            ItemID: LookUp(FinalCollection,cr519_upc=upcInput.Text,ItemID),\r\n            Company:LookUp(FinalCollection,cr519_upc=upcInput.Text,Company),\r\n            LineRECID:LookUp(FinalCollection,cr519_upc=upcInput.Text,'Line RECID'),\r\n            MPN:LookUp(FinalCollection,cr519_upc=upcInput.Text,MPN)\r\n    }\r\n    );\r\n    Patch(FinalCollection,LookUp(FinalCollection,cr519_upc=upcInput.Text),\r\n        {Quantity: LookUp(FinalCollection,cr519_upc=upcInput.Text,Quantity)-LookUp(FinalCollection,cr519_upc=upcInput.Text,Quantity)});\r\n    Reset(SerialNInput);\r\n    Reset(upcInput);\r\n\r\n//SetFocus(upcInput);\r\n//Reset(upcInput);\r\nSet(copyUPC,Blank());\r\nNotify(\"Serial Number is not Required\",NotificationType.Information,2000);\r\n    \r\n,SetFocus(SerialNInput)));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//Continue To Scan S/n\r\n//If(!IsBlank(LookUp(FinalCollection,Quantity <> 0 && upcInput.Text = cr519_upc)),\r\n\r\n//SetFocus(upcInput)\r\n//Reset(upcInput);\r\n//Set(copyUPC,\"\");\r\n\r\n\r\n//)\r\n\r\n\r\n*/"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =19
            Text: ="Comfirm"
            Visible: =false
            Width: =120
            X: =251
            Y: =69
      - SerialNInput:
          Control: Classic/TextInput@2.3.2
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Default: =snOutput
            Font: =Font.'Open Sans'
            Height: =77
            HoverBorderColor: =RGBA(0, 18, 107, 1)
            HoverFill: =RGBA(186, 202, 226, 1)
            OnChange: =Select(UpdateSNBT)
            Visible: |-
              =//If(upcError.Visible = false || IsBlank(upcInput.Text),true,false)
              false
            Width: =496
            X: =121
            Y: =76
      - AllQTY:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =55
            Text: =Sum(FinalCollection,Quantity)
            Visible: =false
            Width: =87
            X: =553
            Y: =287
      - Component1_4:
          Control: CanvasComponent
          ComponentName: Component1
          Properties:
            Height: =70
      - BackSubmitIcon:
          Control: Classic/Icon@2.5.0
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =35
            Icon: =Icon.ChevronLeft
            OnSelect: |-
              =

              UpdateContext({varShowPassPopup: true})

              /*
              Back();
              ForAll(
                  colFilteredItems As item,
                  Patch(
                      SNP_LoadExportSalesOrders,
                      item,
                      {
                          selectedLoad: 0,
                          pickerLoad: ""
                      }
                  )
              );

              Clear(FinalCollection);
              //Reset(upcInput);
              Reset(SerialNInput);
              Set(copyUPC,Blank());
              Set(snOutput,Blank());
              Clear(confirmed);
              Refresh(SNP_ItemMasters);
              Refresh(SNP_SerialNumbers);
              Refresh(SNP_LoadExportSalesOrders);

                  // End Duration Picking
                          Set(varTimerRunning, false);
                          Set(varEndTime, Now());
                          Set(varResetTimer, true);
                          Set(varDurationSeconds, DateDiff(varStartTime, varEndTime, TimeUnit.Seconds));
                          Set(varDurationDisplay, 
                              Text(
                                  Time(varDurationSeconds / 3600, Mod(varDurationSeconds, 3600) / 60, Mod(varDurationSeconds, 60)),
                                  "hh:mm:ss"
                              )
                          );

                          */
            Width: =43
            X: =12
            Y: =17
      - upcError:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 0, 0, 1)
            Font: =Font.'Open Sans'
            Height: =37
            Size: =15
            Text: =//If(IsBlank(upcInput.Text),"","UPC Not Found or Item Fully Scanned")
            Visible: |+
              =//If(IsBlank(LookUp(FinalCollection, cr519_upc=upcInput.Text && Quantity > 0)),true,false)
            Width: =403
            X: =94
            Y: =153
      - ProductGallery:
          Control: Gallery@2.15.0
          Variant: BrowseLayout_Vertical_ThreeTextVariant_ver4.0
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            BorderThickness: =1
            Height: =796
            Items: |+
              =SortByColumns(
                  Filter(FinalCollection, Quantity <> 0),
                  "Line Number",SortOrder.Ascending
              )

            TemplateFill: |-
              =If(ThisItem.'Line Number'=ProductGallery.Selected.'Line Number',
              RGBA(250, 255, 103, 0.8),RGBA(0, 0, 0, 0))
            TemplateSize: =142
            Y: =233
          Children:
            - UpdateSNLog:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(56, 96, 178, 1)
                  Font: =Font.'Open Sans'
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: "=/*\r\nIf(!(upcInput.Text in FinalCollection.cr519_upc) || upcInput.Text in confirmed.UPC ,false,\r\n    If((upcInput.Text in FinalCollection.cr519_upc && LookUp(FinalCollection,cr519_upc=upcInput.Text,cr519_sntrack) = 0), \r\n    //&& !(upcInput in confirmed.UPC),\r\n\r\n\r\n    Patch(confirmed,Defaults(confirmed),{\r\n            UPC:upcInput.Text,\r\n            SerialNo: \"-\",\r\n            LoadExportNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,LoadExportNo),\r\n            SalesOrderNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,SalesOrderNo),\r\n            LineNumber: ThisItem.LineNumber,\r\n            ItemID: ThisItem.ItemID,\r\n            Company:LookUp(FinalCollection,cr519_upc=upcInput.Text,Company),\r\n            LineRECID:LookUp(FinalCollection,cr519_upc=upcInput.Text,'Line RECID'),\r\n            MPN:LookUp(FinalCollection,cr519_upc=upcInput.Text,MPN)\r\n    }\r\n    );\r\n    Patch(FinalCollection,LookUp(FinalCollection,cr519_upc=upcInput.Text&& LineNumber = ThisItem.LineNumber),\r\n        {Quantity: LookUp(FinalCollection,cr519_upc=upcInput.Text&& LineNumber = ThisItem.LineNumber,Quantity)-LookUp(FinalCollection,cr519_upc=upcInput.Text&& LineNumber = ThisItem.LineNumber,Quantity)});\r\n    Reset(SerialNInput);\r\n\r\n//SetFocus(upcInput);\r\n//Reset(upcInput);\r\nSet(copyUPC,Blank());\r\nNotify(\"Serial Number is not Required\",NotificationType.Information,2000);\r\n    \r\n,SetFocus(SerialNInput)));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nIf(!IsBlank(LookUp(FinalCollection,Quantity <> 0 && upcInput.Text = cr519_upc)),\r\n\r\nSetFocus(SerialNInput)\r\n//Reset(upcInput);\r\n//Set(copyUPC,\"\");\r\n\r\n\r\n)\r\n\r\n\r\n*/"
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  Size: =19
                  Text: ="Comfirm"
                  Visible: =false
                  Width: =120
                  X: =251
                  Y: =69
            - UpdateSNupc0_1:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(56, 96, 178, 1)
                  Font: =Font.'Open Sans'
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: "=If((itemIDH.Text in FinalCollection.ItemID && LookUp(FinalCollection,ItemID=itemIDH.Text,cr519_sntrack) = 0) ,\r\n//&& !(itemIDH in confirmed.UPC),\r\n\r\n    Patch(confirmed,Defaults(confirmed),{\r\n            UPC:Blank(),\r\n            SerialNo: \"-\",\r\n            LoadExportNo: ThisItem.LoadExportNo,\r\n            SalesOrderNo: ThisItem.SalesOrderNo,\r\n            LineNumber: ThisItem.LineNumber,\r\n            ItemID: ThisItem.ItemID,\r\n            Company:LookUp(FinalCollection,ItemID=itemIDH.Text,Company),\r\n            LineRECID:ThisItem.LineRECID,\r\n            MPN:ThisItem.MPN\r\n    }\r\n    );\r\n    Patch(FinalCollection,LookUp(FinalCollection,ItemID=itemIDH.Text && LineNumber = ThisItem.LineNumber),\r\n        {Quantity: LookUp(FinalCollection,ItemID=itemIDH.Text && LineNumber = ThisItem.LineNumber,Quantity)-LookUp(FinalCollection,ItemID=itemIDH.Text && LineNumber = ThisItem.LineNumber,Quantity)});\r\n    Reset(SerialNInput);\r\n\r\n//SetFocus(upcInput);\r\n//Reset(upcInput);\r\nSet(copyUPC,\"\");\r\nNotify(\"Serial Number is not Required\",NotificationType.Information,2000);\r\n    \r\n,SetFocus(SerialNInput));\r\n\r\n\r\n\r\n\r\n\r\n\r\n//If(!IsBlank(LookUp(FinalCollection,Quantity <> 0 && upcInput.Text = cr519_upc)),\r\n\r\nSetFocus(SerialNInput)\r\n//Reset(upcInput);\r\n//Set(copyUPC,\"\");\r\n\r\n\r\n\r\n\r\n\r\n"
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  Size: =19
                  Text: ="Comfirm"
                  Visible: |-
                    =false

                    //If(Avalible.Visible = true,true,false)
                  Width: =120
                  X: =80
                  Y: =72
            - lineNumPD:
                Control: Label@2.5.1
                Properties:
                  AutoHeight: =true
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =37
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: |-
                    =//ThisItem.LineNumber
                    //setlinenb
                  VerticalAlign: =VerticalAlign.Top
                  Visible: =false
                  Width: =339
                  X: =60
                  Y: =60
            - upcHide:
                Control: Label@2.5.1
                Properties:
                  AutoHeight: =true
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =37
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: =ThisItem.cr519_upc
                  VerticalAlign: =VerticalAlign.Top
                  Visible: =false
                  Width: =339
                  X: =32
                  Y: =25
            - itemIDH:
                Control: Label@2.5.1
                Properties:
                  AutoHeight: =true
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =37
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: =ThisItem.ItemID
                  VerticalAlign: =VerticalAlign.Top
                  Visible: =false
                  Width: =339
                  X: =40
                  Y: =40
            - LineRECIDPD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Semibold
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: =ThisItem.'Line RECID'
                  VerticalAlign: =VerticalAlign.Top
                  Visible: =false
                  Width: =Parent.TemplateWidth - 104
                  X: =46
                  Y: =11
            - BrandPD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =28
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =14
                  Text: |-
                    ="Brand : " & ThisItem.cr519_brandid
                  VerticalAlign: =VerticalAlign.Top
                  Width: =403
                  X: =81
                  Y: =43
            - Separator2_3:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Fill: =RGBA(0, 18, 107, 1)
                  Height: =1
                  OnSelect: =Select(Parent)
                  Width: =Parent.TemplateWidth
                  Y: =141
            - NamePD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =41
                  OnSelect: =Select(Parent)
                  Overflow: =Overflow.Scroll
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =14
                  Text: |-
                    ="Name : " & ThisItem.cr519_productname
                  VerticalAlign: =VerticalAlign.Top
                  Width: =457
                  X: =80
                  Y: =67
            - QTYPD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =42
                  OnSelect: =Select(Parent)
                  Overflow: =Overflow.Scroll
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =8
                  Size: =19
                  Text: |-
                    ="QTY : " & ThisItem.Quantity
                  VerticalAlign: =VerticalAlign.Top
                  Width: =146
                  X: =483
            - mpnPD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =42
                  OnSelect: =Select(Parent)
                  Overflow: =Overflow.Scroll
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =8
                  Size: =20
                  Text: |-
                    ="MPN : " & ThisItem.MPN
                  VerticalAlign: =VerticalAlign.Top
                  Width: =403
                  X: =81
            - itemIDPD:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =29
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: |-
                    ="Location : " & ThisItem.WHLocationID
                  VerticalAlign: =VerticalAlign.Top
                  Width: =403
                  X: =80
                  Y: =108
            - snTrackShow:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =27
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =14
                  Text: |-
                    ="SN Track : " & ThisItem.cr519_sntrack
                  VerticalAlign: =VerticalAlign.Top
                  Visible: =false
                  Width: =132
                  X: =371
                  Y: =110
            - Checkbox2:
                Control: Classic/CheckBox@2.1.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  CheckboxBorderColor: =RGBA(0, 18, 107, 1)
                  CheckboxSize: =50
                  CheckmarkFill: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  Height: =40
                  HoverColor: =RGBA(0, 18, 107, 1)
                  OnCheck: =
                  OnSelect: =
                  OnUncheck: =
                  Size: =18
                  Text: =
                  Width: =44
                  X: =14
                  Y: =35
            - Label8:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Font: =Font.'Open Sans'
                  Height: =33
                  OnSelect: =Select(Parent)
                  Size: =13
                  Text: ="Picked"
                  Width: =64
                  X: =6
                  Y: =75
            - Button4:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(56, 96, 178, 1)
                  Font: =Font.'Open Sans'
                  Height: =36
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: =Navigate('Barcode Screen');
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  Size: =18
                  Text: ="Scan"
                  Visible: |-
                    =//true
                    If(ThisItem.cr519_sntrack = 1,true,false)
                  Width: =71
                  X: =551
                  Y: =47
            - snTrackShow_3:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =27
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =14
                  Text: |-
                    ="Line No : " & ThisItem.LineNumber
                  VerticalAlign: =VerticalAlign.Top
                  Width: =132
                  X: =508
                  Y: =110
      - LabelSRN:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =47
            Text: ="S/N"
            Visible: =//If(upcError.Visible = false || IsBlank(upcInput.Text),true,false)
            Width: =92
            Y: =201
      - Avalible:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(54, 176, 75, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =37
            Size: =15
            Text: ="Avalible"
            Visible: |-
              =//If(
                //  IsBlank(LookUp(FinalCollection, cr519_upc =upcInput.Text && Quantity > 0)),false,true)
            Width: =116
            X: =117
            Y: =153
      - UpdateSNBT:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=//If(IsBlank(SerialNInput.Text),false,\r\n   /* If(DupSN.Visible = true,Notify(\"Duplicate S/N Number, Please Check\",NotificationType.Error,3000),\r\n    \r\n    Patch(confirmed,Defaults(confirmed),{\r\n            UPC:upcInput.Text,\r\n            SerialNo: SerialNInput.Text,\r\n            LoadExportNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,LoadExportNo),\r\n            SalesOrderNo: LookUp(FinalCollection,cr519_upc=upcInput.Text,SalesOrderNo),\r\n            LineNumber: Value(lineNumPD.Text),\r\n            ItemID: LookUp(FinalCollection,cr519_upc=upcInput.Text,ItemID),\r\n            Company:LookUp(FinalCollection,cr519_upc=upcInput.Text,Company),\r\n            LineRECID:LookUp(FinalCollection,cr519_upc=upcInput.Text,'Line RECID'),\r\n            MPN:LookUp(FinalCollection,cr519_upc=upcInput.Text,MPN)\r\n    }\r\n    );\r\n    Patch(FinalCollection,LookUp(FinalCollection,cr519_upc=upcInput.Text && LineNumber = Value(lineNumPD.Text)),\r\n        {Quantity: LookUp(FinalCollection,cr519_upc=upcInput.Text && LineNumber = Value(lineNumPD.Text),Quantity)-1});\r\n    Reset(SerialNInput);\r\n    Reset(upcInput);\r\n    Set(copyUPC,\"\");\r\n\r\n//Patch(FinalCollection,LookUp(FinalCollection,cr519_upc=upcInput.Text && LineNumber = Value(lineNumPD.Text))\r\n    \r\n);\r\n\r\n);\r\n\r\n\r\n\r\n   If(IsBlank(LookUp(FinalCollection,Quantity <> 0 && upcInput.Text = cr519_upc)),\r\n   \r\nSet(copyUPC,\"\");\r\nSet(snOutput,Blank());\r\nSetFocus(upcInput);\r\nReset(upcInput),\r\nSetFocus(upcInput);\r\n\r\n\r\n\r\n);\r\nSet(snOutput,\"\");\r\nSet(snOutput,Blank());\r\n\r\n*/"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =19
            Text: ="Comfirm"
            Visible: =If(Avalible.Visible = true,true,false)
            Width: =120
            X: =497
            Y: =191
      - LabelSNER:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 0, 0, 1)
            Font: =Font.'Open Sans'
            Height: =37
            Size: =15
            Text: ="Scan or Insert Serial Number"
            Visible: =If(IsBlank(SerialNInput.Text) && Avalible.Visible = true, true, false)
            Width: =403
            X: =94
            Y: =261
      - DupSN:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 0, 0, 1)
            Font: =Font.'Open Sans'
            Height: =37
            Size: =15
            Text: ="Duplicate Serial Number"
            Visible: |-
              =If(SerialNInput.Text = "-",false,
              If(Upper(SerialNInput.Text) in Upper(LookUp(confirmed,SerialNo = SerialNInput.Text,SerialNInput.Text)) && Not(IsBlank(SerialNInput.Text)),true,false)
              )
            Width: =403
            X: =94
            Y: =270
      - SubmitBT:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=If(CountRows(Filter(ProductGallery.AllItems, !Checkbox2.Value))=0,\r\n    If(CountRows(confirmed) <> varSumSnTrack,\r\n    Notify(\r\n        \"ข้อมูล Barcode ที่ต้องเก็บยังขาด Line ที่ : \" & Concat(Filter(FinalCollection As FN, FN.cr519_sntrack = 1 && !(FN.LineNumber in ShowColumns(confirmed, LineNumber))), \"Line \" & 'Line Number' & \" \"), \r\n        NotificationType.Error\r\n    ),\r\n    // Success\r\n    Notify(\"บันทึกสำเร็จ\", NotificationType.Success);\r\n    // End Duration Picking\r\n            Set(varTimerRunning, false);\r\n            Set(varEndTime, Now());\r\n            Set(varResetTimer, true);\r\n            Set(varDurationSeconds, DateDiff(varStartTime, varEndTime, TimeUnit.Seconds));\r\n            Set(varDurationDisplay, \r\n                Text(\r\n                    Time(varDurationSeconds / 3600, Mod(varDurationSeconds, 3600) / 60, Mod(varDurationSeconds, 60)),\r\n                    \"hh:mm:ss\"\r\n                )\r\n            );\r\n    // Update Data\r\n            ForAll(\r\n                colFilteredItems As item,\r\n                Patch(\r\n                    SNP_LoadExportSalesOrders,\r\n                    item,\r\n                    {\r\n                        selectedLoad: 2,\r\n                        StatusApp:\"Picked\",\r\n                        durationPicking:varDurationDisplay,\r\n                        pickingTag:tagInput.Text\r\n                    }\r\n                )\r\n            );\r\n    Patch(TH_LoadPickedToAXES,Defaults(TH_LoadPickedToAXES),{LoadExportNumber:gblCurrentLoad.cr519_loadexportno,Picked:1});\r\n\r\n    ForAll(confirmed,\r\n        Patch(SNP_SerialNumbers,Defaults(SNP_SerialNumbers),\r\n            {\r\n                LoadExportNo: LoadExportNo,\r\n                SalesOrderNo: SalesOrderNo,\r\n                LineNumber: Value(LineNumber),\r\n                ItemID: ItemID,\r\n                UPC: UPC,\r\n                SerialNo: SerialNo,\r\n                LineRECID: LineRECID,\r\n                Company: \"dep\",\r\n                sent:0\r\n            }\r\n        )\r\n    );\r\n    \r\n\r\n    Reset(tagInput);\r\n    Reset(LoadExportBox);\r\n    Back();\r\n)\r\n,\r\n         Notify(    \r\n            \"Line ที่ยังไม่ได้ Pick: \" & \r\n        Concat(Filter(ProductGallery.AllItems, !Checkbox2.Value), \"Line \" & LineNumber & \" \"),\r\n        NotificationType.Error)\r\n);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\nIf(LookUp(SNP_LoadExportSalesOrders,LoadExportNo = LoadExportBox.Selected.cr519_loadexportno && MPN in FinalCollection.MPN ,Scanned) = 0 ,\r\nIf(LookUp(FinalCollection,ItemID in confirmed.ItemID,Quantity) <> 0,Notify(\"Please update the serial number already filled in.\"),\r\n\r\nForAll(confirmed,\r\n    Patch(SNP_SerialNumbers,Defaults(SNP_SerialNumbers),\r\n    {   LoadExportNo: LoadExportNo,\r\n        SalesOrderNo: SalesOrderNo,\r\n        LineNumber: Value(LineNumber),\r\n        ItemID: ItemID,\r\n        UPC: UPC,\r\n        SerialNo: SerialNo,\r\n        Company: Company,\r\n        LineRECID: LineRECID,\r\n        sent:0\r\n    }\r\n    )\r\n);\r\n\r\nUpdateIf(SNP_LoadExportSalesOrders,LoadExportNo = LoadExportBox.Selected.cr519_loadexportno && LineNumber in confirmed.LineNumber  ,{Scanned:1});\r\n\r\n//Patch(SNP_LoadExportSalesOrders,Filter(SNP_LoadExportSalesOrders,LoadExportNo = LoadExportBox.Selected.Result),\r\n        //{Scanned:1});\r\n\r\nClear(LoadExportCollection);\r\nReset(LoadExportBox);\r\nSet(copyUPC,Blank());\r\nBack();\r\n\r\n),Notify(\"Some Line in Load Export Number is already submitted\",NotificationType.Error,4000)\r\n\r\n);\r\nRefresh(SNP_LoadExportSalesOrders);\r\nRefresh(SNP_ItemMasters);\r\nRefresh(SNP_SerialNumbers);\r\n\r\n\r\n*/"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Submit"
            X: =180
            Y: =1054
      - ProductHeader:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            BorderThickness: =1
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(102, 182, 227, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =40
            Size: =20
            Text: ="Product Detail From " & gblCurrentLoad.cr519_loadexportno
            Width: =640
            Y: =193
      - mpnShowdetail:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =37
            PaddingBottom: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =19
            Text: |-
              =//"MPN : " & LookUp(FinalCollection,cr519_upc = upcInput.Text,cr519_mpn)
            Visible: |-
              =//If(
                 // IsBlank(LookUp(FinalCollection, cr519_upc =upcInput.Text && Quantity > 0)),false,true)
            Width: =384
            X: =233
            Y: =153
      - snBarcode:
          Control: BarcodeReader@1.0.25
          Properties:
            Height: =52
            OnScan: |-
              =Set(snOutput,First(snBarcode.Barcodes).Value);
              //SetFocus(UpdateSNBT);
            ScanningMode: ='BarcodeReader.ScanningMode'.AutomaticallyScan
            Text: ="S/N"
            Visible: =false
            Width: =75
            X: =19
            Y: =88
      - Button2:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(255, 0, 0, 1)
            Font: =Font.'Open Sans'
            Height: =41
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(255, 0, 0, 100), -20%)
            OnSelect: =Set(varCancelBT,true)
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Size: =20
            Text: ="Cancel"
            Visible: =false
            Width: =132
            X: =497
            Y: =17
      - Rectangle1:
          Control: Rectangle@2.3.0
          Group: Group1
          Properties:
            BorderColor: =RGBA(26, 26, 26, 1)
            BorderThickness: =2
            Fill: =RGBA(255, 255, 255, 0.9)
            Height: =1066
            Visible: =varCancelBT
            Width: =640
            Y: =70
      - Label10:
          Control: Label@2.5.1
          Group: Group1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =71
            Size: =20
            Text: ="Are you sure you want to cancel ?"
            Visible: =varCancelBT
            Width: =432
            X: =110
            Y: =434
      - NoBT2:
          Control: Classic/Button@2.2.0
          Group: Group1
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            Height: =71
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: =Set(varCancelBT,false)
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="No"
            Visible: =varCancelBT
            Width: =186
            X: =356
            Y: =597
      - yesBT:
          Control: Classic/Button@2.2.0
          Group: Group1
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            Height: =71
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: "=    UpdateIf(\r\n    SNP_LoadExportSalesOrders, LoadExportNo = gblCurrentLoad.cr519_loadexportno, { \r\n        selectedLoad: 3\r\n        \r\n        }\r\n    );\r\n\r\n    Refresh(SNP_LoadExportSalesOrders);\r\n    Set(varCancelBT,false);\r\n    Reset(LoadExportBox);\r\n    Back();"
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Yes"
            Visible: =varCancelBT
            Width: =186
            X: =110
            Y: =597
      - Label11:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =58
            Overflow: =Overflow.Scroll
            Size: =16
            Text: ="           " & LookUp(SNP_LoadExportSalesOrders,LoadExportNo = gblCurrentLoad.cr519_loadexportno,RemarkPicking)
            VerticalAlign: =VerticalAlign.Top
            Width: =383
            Y: =132
      - Label12:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =73
            Size: =16
            Text: |-
              ="Route : " & LookUp(SNP_LoadExportSalesOrders,LoadExportNo = gblCurrentLoad.cr519_loadexportno,DestinationCode)
            VerticalAlign: =VerticalAlign.Top
            Width: =257
            X: =383
            Y: =117
      - Label12_1:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =36
            Size: =16
            Text: |-
              ="Customer Name : " & LookUp(SNP_LoadExportSalesOrders,LoadExportNo = gblCurrentLoad.cr519_loadexportno,CustomerName)
            Width: =640
            Wrap: =false
            Y: =69
      - Label12_2:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =27
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =16
            Text: |-
              =" Remark Picking : "
            VerticalAlign: =VerticalAlign.Bottom
            Width: =371
            Y: =105
      - ContainerPin:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.None
            Fill: =RGBA(51, 51, 51, 0.9)
            Height: =1067
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Visible: =varShowPassPopup
            Width: =640
            Y: =69
          Children:
            - pinCode:
                Control: Classic/TextInput@2.3.2
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Default: =
                  Font: =Font.'Open Sans'
                  Format: =TextFormat.Number
                  HoverBorderColor: =RGBA(0, 18, 107, 1)
                  HoverFill: =RGBA(186, 202, 226, 1)
                  Mode: =TextMode.Password
                  X: =40
                  Y: =233
            - Label13:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Center
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(255, 255, 255, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =64
                  Text: ="กรุณาใส่ Pin Code"
                  X: =40
                  Y: =168
            - cancelPinBT:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(255, 71, 71, 1)
                  Font: =Font.'Open Sans'
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: |-
                    =UpdateContext({varShowPassPopup: false})
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  Text: ="Cancle"
                  X: =180
                  Y: =678
            - confirmPinBT:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(54, 176, 75, 1)
                  Font: =Font.'Open Sans'
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: "=If(\r\n    !IsBlank(\r\n        LookUp(\r\n            th_pincodesupervisor_whs,             \r\n            pincodeN = Value(pinCode.Text)\r\n        )\r\n    ),\r\n    UpdateContext({varShowPassPopup: false});   // ปิด รหัสถูก\r\nClearCollect(\r\n    colFilteredItems,\r\n    Filter(\r\n        SNP_LoadExportSalesOrders,\r\n        LoadExportNo = gblCurrentLoad.cr519_loadexportno\r\n    )\r\n);\r\n\r\n    ForAll(\r\n        colFilteredItems As item,\r\n        Patch(\r\n            SNP_LoadExportSalesOrders,\r\n            item,\r\n            {\r\n                selectedLoad: 0,\r\n                pickerLoad: \"\",\r\n                StatusApp:\"Open\",\r\n                pickingTag:\"\"\r\n            }\r\n        )\r\n    );\r\n\r\n    Clear(FinalCollection);\r\n    Reset(LoadExportBox);\r\n    Reset(pinCode);\r\n    Reset(SerialNInput);\r\n    Set(copyUPC,Blank());\r\n    Set(snOutput,Blank());\r\n    Clear(confirmed);\r\n    Refresh(SNP_ItemMasters);\r\n    Refresh(SNP_SerialNumbers);\r\n    Refresh(SNP_LoadExportSalesOrders);\r\n\r\n        // End Duration Picking\r\n                Set(varTimerRunning, false);\r\n                Set(varEndTime, Now());\r\n                Set(varResetTimer, true);\r\n                Set(varDurationSeconds, DateDiff(varStartTime, varEndTime, TimeUnit.Seconds));\r\n                Set(varDurationDisplay, \r\n                    Text(\r\n                        Time(varDurationSeconds / 3600, Mod(varDurationSeconds, 3600) / 60, Mod(varDurationSeconds, 60)),\r\n                        \"hh:mm:ss\"\r\n                    )\r\n                );\r\n    \r\n    \r\n    Back();\r\n    \r\n    ,                      \r\n\r\n    // รหัสผิด\r\n\r\n\r\n\r\n    Notify(\"รหัสไม่ถูกต้อง\", NotificationType.Error)\r\n)\r\n"
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  Text: ="Confirm"
                  X: =180
                  Y: =487
      - Label21:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Text: =
            X: =40
            Y: =121
